<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css "href="css/web.css"/>
</head>
 <style>
   <tr>
          <td class = "tabnum"></td>
           <td class = "tabname"></td>
           <td class = "tablink"></td>
          </tr>
          <tr>
          <td class = "tabnum"></td>
           <td class = "tabname"></td>
           <td class = "tablink"></td>
          </tr>
  </style>

<script>
$(document).ready(function()
{   

  
  $("#btnsignup").click(function()
	{
		//alert("callnow");
		var tempSearch;
		//tempSearch = document.forms["search"]["searchkey"].value;
		if(tempSearch == "")
			{
				alert("Please fill the field.");
			}
		else
			{
         var login=$("#login").val();
         var pass=$("#mypass").val();
        
          var mydata="user="+login+"&pass="+pass;
        alert(mydata);
				$.ajax(
				{
					url: "http://port-8888.oscarwu-oscarwu28742835.codeanyapp.com/ajaxsample",
					type: 'POST',
					data: mydata,
					success: function(resultReturn)
					{ 
						//alert("search success");
           alert(resultReturn);
						//alert(JSON.stringify(resultReturn));
			      var _stringObj = JSON.stringify(resultReturn);
			      var stringObj = JSON.parse(resultReturn);
			      for(i = 0; i < stringObj.length; i++)
            {
					    var num = i + 1;
					    document.getElementsByClassName("tabnum")[i].innerHTML = num;
					    document.getElementsByClassName("tabname")[i].innerHTML = stringObj[i].texttitle;
				      document.getElementsByClassName("tablink")[i].innerHTML = stringObj[i].command;
				     }
					},error: function (xhr, textStatus, errorThrown) 
					{
						alert("search failed");
						console.log(textStatus);
            alert(xhr.responseText);
      		}
				});
			}
   });
   
    $("#btnlogin").click(function()
	{
		//alert("callnow");
		var tempSearch;
		//tempSearch = document.forms["search"]["searchkey"].value;
		if(tempSearch == "")
			{
				alert("Please fill the field.");
			}
		else
			{
         var login=$("#login").val();
         var pass=$("#mypass").val();
        
          var mydata="user="+login+"&pass="+pass;
        alert(mydata);
				$.ajax(
				{
					url: "http://port-8888.oscarwu-oscarwu28742835.codeanyapp.com/Login", 
					/*url: "http://10.10.4.116:8080/Login",*/
					type: 'POST',
					data: mydata,
					success: function(resultReturn)
					{ 
						//alert("search success");
           alert("login result="+resultReturn);
					
					if(resultReturn=="Login Success"){
					  localStorage.setItem("mylogin",login);
					  alert(localStorage.getItem("mylogin"));
					    window.location.href="/favlistpage";
					 }
					},error: function (xhr, textStatus, errorThrown) 
					{
						alert("search failed");
						console.log(textStatus);
            alert(xhr.responseText);
      		}
				});
			}
   });
});
  $.ajax({
				url : "http://api.wunderground.com/api/b20b6bbf1fd069a8/geolookup/conditions/q/HK/HongKong.json",
				dataType : "jsonp",
				success : function(parsed_json) {
					var temp_c = parsed_json['current_observation']['temp_c'];
					document.getElementById("weather").innerHTML = temp_c + "&deg;C";
				}
				});
  
  
</script>
<body>
  <div class = "mask">
	<div class = "style1">User page</div>
    
  <div id="weather"> </div><br>

  <a href="/favlistpage">favourite list</a> <a href="/logout">log out</a> <a href="/searchpage">search</a>
  	<br>
  	<form id="formID" name="search">
			login: <input type="text" id="login"/>
      pass: <input type="password" id="mypass"/>
		</form>
  	<button id="btnsignup" class="button button1">
    	Signup
  	</button>
	<button id="btnlogin" class="button button1">
    	Login
  	</button>
    <br>
  <table id="mytable">
      <tr>
          <td class = "tabnum"></td>
           <td class = "tabname"></td>
           <td class = "tablink"></td>
          </tr>
          <tr>
          <td class = "tabnum"></td>
           <td class = "tabname"></td>
           <td class = "tablink"></td>
          </tr>
  </table>
    <img src="img\about\5.jpg"><p>


  </div>
    </div>
</body>

</html>